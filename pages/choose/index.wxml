<view class="box1" wx:if="{{ categories.length }}">
  <view class="box-1">
    <van-sidebar style="text-align: center;">
      <van-sidebar-item
        wx:for="{{categories}}"
        wx:key="id"
        title="{{item.dictLabel}}"
        data-idx="{{index}}" bind:click="categoryClick"
      />
    </van-sidebar>
  </view>
  <scroll-view class="box-2" scroll-y="true">
    <van-empty wx:if="{{!goods.length}}" description="暂无商品" />
    <van-card
      wx:for="{{goods}}" wx:key="id"
      centered="true"
      lazy-load="true"
      price="{{item.dishesPrice}}"
      desc="{{ item.simpleDesc }}"
      thumb-mode="aspectFill"
      tag="{{ item.hasNum ? item.hasNum : '' }}"
      title="{{item.name}}"
      thumb="https://xiaoxiaofeng.com/restaurant-reservation{{item.img}}">
      <view class="goods-btn" slot="footer">
        <van-icon name="add" color="#e64340" size="50rpx" data-idx="{{index}}" bind:click="addCart" />
      </view>
    </van-card>
  </scroll-view>
</view>
<van-empty style="margin-top: 30%;" wx:else description="暂无商品" />

<van-popup
  show="{{ showGoodsDetailPOP }}"
  custom-style="max-height: 80%;z-index:99999;"
  closeable
  close-icon="close"
  position="bottom"
  bind:close="hideGoodsDetailPOP">
  <image wx:if="{{ showGoodsDetailPOP }}" mode='aspectFill' class='photos-00' src='{{curGoodsMap.basicInfo.pic}}'></image>
  <view class="title-name">{{curGoodsMap.basicInfo.name}}</view>  
  <view wx:if="{{curGoodsMap.content}}" class="introduce">
    <view class="title">产品介绍</view>
    <view class="content">
      <parser html="{{curGoodsMap.content}}" />
    </view>
  </view>
  <view class="blank"></view>
</van-popup> 

<van-popup
  show="{{ showCartPop }}"
  position="bottom"
  custom-style="bottom: 80rpx;max-height: 80%;"
  bind:close="hideCartPop">
  <view class="empty-box" bindtap="clearCart">
    <van-icon name="delete" />
    <view class="empty-1">清空购物车</view>
  </view>
  <view wx:for="{{orderInfo.orderDishesModels}}" wx:key="key" class="cart-goods-list">
    <view class="l">
      <view class="title">{{item.dishesModel.name}}</view>
    </view>
    <view class="r">
      <view class="price">¥{{ item.totalPrice }}</view>
      <van-stepper value="{{ item.dishesNum }}" min="0" async-change disable-input data-idx="{{index}}" bind:change="cartStepChange"/>
    </view>
  </view>
  <view class="cart-goods-list">
    <view class="l">
      <view class="title">订金</view>
    </view>
    <view class="r">
      <view class="price">¥{{ orderInfo.depositPrice }}</view>
      <van-stepper value="{{ 1 }}" min="0" async-change disable-input disabled data-idx="{{index}}" />
    </view>
  </view>
</van-popup>

<view class="cart-bar" wx:if="{{ categories.length }}">
  <view class="l" bindtap="showCartPop">
    <van-button size="small" type="default" round icon="shopping-cart-o">购物车</van-button>
  </view>  
  <view class="r">
    <view class="amount"><text>¥</text>{{orderInfo.totalPrice}}</view>
    <view class="topay" bindtap="goPay">选好了</view>
  </view>
</view>